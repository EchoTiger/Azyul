<HBProfile>
///////////////////////////////////////////////////////////////////////
// Profile Developer: Echo
// Farm zone: Drak'Tharon Keep
// Farm mobs: Partial run.
///////////////////////////////////////////////////////////////////////

<Name>Drak'Tharon - Optimized Gold Farm - Heavy Pulls [$Rev$]</Name>

<MinFreeBagSlots>-1</MinFreeBagSlots>




<MailGrey>False</MailGrey>
<MailWhite>True</MailWhite>
<MailGreen>False</MailGreen>
<MailBlue>True</MailBlue>
<MailPurple>True</MailPurple>

<SellGrey>True</SellGrey>
<SellWhite>True</SellWhite>
<SellGreen>True</SellGreen>
<SellBlue>True</SellBlue>
<SellPurple>False</SellPurple>

<ProtectedItems>
</ProtectedItems>

<Vendors>
</Vendors>

<Mailboxes>
</Mailboxes>

<AvoidMobs>
	<Mob Name="Summon Enabler Stalker" Entry="53488" /> <!-- Hidden mob that coordinates raid/group summons in every dungeon -->
</AvoidMobs>

<Blackspots>
</Blackspots>



<QuestOrder>


<CustomBehavior File="LoadRemoteCode"/>
<CustomBehavior File="RemoteCode" CodeUrl="https://raw.githubusercontent.com/EchoTiger/UNS-Raw/master/AzyulSnips/statter.xml"/>

<If Condition="!(Me.MapId == 600)" >

	<CustomBehavior File="UserSettings" FindVendorsAutomatically="False" LootMobs="True" PullDistance="1" LogoutForInactivity="False" />				

<CustomBehavior File="RemoteCode" CodeUrl="https://raw.githubusercontent.com/Pookthetook/AzyulBotBase/master/Navigation/ToNorthrend.xml"/> 


<!-- ALLIANCE CHECK - RIDING -->
<If Condition="(!HasSpell(54197))  &amp;&amp; (Me.IsAlliance)" >
	<CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: Training Cold Weather Flying.&quot;);" />
				
	<If Condition="Me.Gold &gt;= 401" >
		<RunTo X="2274.391" Y="5174.106" Z="11.17985" />
		<CustomBehavior File="InteractWith"  MobId="35133" WaitTime="1000" CollectionDistance="50" X="2274.391" Y="5174.106" Z="11.17985" />
		<CustomBehavior File="ForceTrainRiding" MobId="35133" />
		<CustomBehavior File="WaitTimer" WaitTime="5000" GoalText="Waiting {TimeRemaining}"  />
	</If>
</If>
<!-- HORDE CHECK - RIDING -->
<If Condition="(!HasSpell(54197)) &amp;&amp; (Me.IsHorde)">
	<CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: Training Cold Weather Flying.&quot;);" />

	<!-- Elevator -->
	<If Condition="(Me.Z &lt; 190)" >
		<RunTo X="2869.177" Y="6215.224" Z="104.2853" />
		<CustomBehavior File="UseTransport" TransportId="188521" 
					WaitAtX="2869.177" WaitAtY="6215.224" WaitAtZ="104.2853"
					GetOffX="2880.96" GetOffY="6225.813" GetOffZ="208.7495" 
					TransportStartX="2877.649" TransportStartY="6223.188" TransportStartZ="104.8859" 
					TransportEndX="2892.18" TransportEndY="6236.337" TransportEndZ="208.908"
					StandOnX="2878.604" StandOnY="6223.707" StandOnZ="105.3792"  />
 	</If>
	<If Condition="Me.Gold &gt;= 401" >
		<RunTo X="2773.588" Y="6144.316" Z="208.7535" />
		<CustomBehavior File="InteractWith"  MobId="35135" WaitTime="1000" CollectionDistance="50" X="2773.588" Y="6144.316" Z="208.7535" />
		<CustomBehavior File="ForceTrainRiding" MobId="35135" />
		<CustomBehavior File="WaitTimer" WaitTime="5000" GoalText="Waiting {TimeRemaining}"  />
	</If>
</If>

<!--Flying notification -->
<If Condition="(!HasSpell(54197))">
	<CustomBehavior File="UserDialog" AllowBotStop="True" SoundCue="Exclamation" SoundCueInterval="1" StopOnContinue="True" Text="You don't have enough gold to train Cold Weather Flying!\nYou must have Cold Weather Flying to continue." />
</If>

<!-- END OF COLD WEATHER FLYING CHECK -->

</If>

<If Condition="(Me.MapId == 600)" >
	<CustomBehavior File="RunCode" Code="Bots.Professionbuddy.PBLog.Log(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: &quot;, System.Windows.Media.Colors.Red, &quot;Bot started inside of instance. Moving out.&quot;);" />
	<RunTo X="-515.2283" Y="-500.0652" Z="11.0231"  />
	<CustomBehavior File="MyCTM" X="-525.4516" Y="-474.7986" Z="10.98291" TerminateWhen="Me.MapId != 600" />
</If>	

<CustomBehavior File="UserSettings" LootMobs="True" PullDistance="25" />				
<CustomBehavior File="RunMacro" Macro="/script SetDungeonDifficultyID(1);" />
<CustomBehavior File="RunMacro" Macro="/script ResetInstances();" />

<CustomBehavior File="Hooks\DoWhen" ActivityName="CustomDeathHook" AllowUseDuringCombat="True" AllowExecutionWhileNotAlive="true" UseWhen="Me.IsGhost" >
		<DisableBehavior Name="Death" />
		<DisableBehavior Name="Vendor" />
		<CustomBehavior File="WaitTimer" WaitTime="1500" /> <!-- Safety Lag -->
        <CustomBehavior File="RunCode" Code="Bots.Professionbuddy.PBLog.Log(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: &quot;, System.Windows.Media.Colors.Red, &quot;Looks like we died, returning to instance.&quot;);" />
		<RunTo X="4436.68" Y="-1981.023" Z="159.1304" />
		<RunTo X="4762.348" Y="-2044.422" Z="229.3993" />
		<RunTo X="4774.139" Y="-2032.782" Z="229.3779" />
		<CustomBehavior File="GoThruPortal" Timeout="30000" X="4774.691" Y="-2015.088" Z="229.3516" />
		<EnableBehavior Name="Vendor" />
		<EnableBehavior Name="Death" />
</CustomBehavior>
<CustomBehavior File="Hooks\DoWhen" ActivityName="CustomDeathHook" Command="Disable" />

<!-- Declare movement buff and defensive hooks -->
	<If Condition="Me.Class == WoWClass.Mage" >
		<CustomBehavior File="Hooks\DoWhen" ActivityName="MoveDefHook" AllowUseDuringCombat="True" UseWhen="(Me.Combat &amp;&amp; Me.IsMoving &amp;&amp; Me.IsInInstance &amp;&amp; Me.IsAlive) &amp;&amp; (!WoWSpell.FromId(11426).Cooldown &amp;&amp; Me.KnowsSpell(11426))" > <!-- (!WoWSpell.FromId(1953).Cooldown) ||  -->
			<CustomBehavior File="RunCode" Code="Bots.Professionbuddy.PBLog.Log(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: &quot;, System.Windows.Media.Colors.Orange, &quot;Attempting use of passive defensive maneuvers.&quot;);" />
			<CustomBehavior File="Misc\RunLua" Lua="CastSpellByID(11426);" />
		</CustomBehavior>
	</If>
	<If Condition="Me.Class == WoWClass.Priest" >
		<CustomBehavior File="Hooks\DoWhen" ActivityName="MoveDefHook" AllowUseDuringCombat="True" UseWhen="(Me.Combat &amp;&amp; Me.IsMoving &amp;&amp; Me.IsInInstance &amp;&amp; Me.IsAlive)	&amp;&amp; ((!WoWSpell.FromId(139).Cooldown &amp;&amp; !Me.HasAura(139)) || (!WoWSpell.FromId(17).Cooldown &amp;&amp; !Me.HasAura(17) &amp;&amp; Me.KnowsSpell(17) &amp;&amp; !Me.HasAura(6788)))" >
			<CustomBehavior File="RunCode" Code="Bots.Professionbuddy.PBLog.Log(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: &quot;, System.Windows.Media.Colors.Orange, &quot;Attempting use of passive defensive maneuvers.&quot;);" />
			<CustomBehavior File="Misc\RunLua" Lua="CastSpellByID(139); CastSpellByID(17);" />
		</CustomBehavior>
	</If>
	<!-- <If Condition="Me.Class == WoWClass.Warlock" >
		<CustomBehavior File="Hooks\DoWhen" ActivityName="MoveDefHook" AllowUseDuringCombat="True" UseWhen="(Me.Combat &amp;&amp; Me.IsMoving)" >
		</CustomBehavior>
	</If> May use Burning Rush here -->
	<If Condition="Me.Class == WoWClass.Druid" >
		<CustomBehavior File="Hooks\DoWhen" ActivityName="MoveDefHook" AllowUseDuringCombat="True" UseWhen="(Me.Combat &amp;&amp; Me.IsMoving &amp;&amp; Me.IsInInstance &amp;&amp; Me.IsAlive) &amp;&amp; ((Me.HasAura(768) &amp;&amp; !WoWSpell.FromId(1850).Cooldown) || (Me.HealthPercent &lt;= 20 &amp;&amp; !WoWSpell.FromId(22812).Cooldown))" >
			<CustomBehavior File="RunCode" Code="Bots.Professionbuddy.PBLog.Log(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: &quot;, System.Windows.Media.Colors.Orange, &quot;Attempting use of passive defensive maneuvers.&quot;);" />
			<If Condition="Me.HealthPercent &lt;= 20" >
				<CustomBehavior File="Misc\RunLua" Lua="CastSpellByID(22812);" />
			</If>
			<CustomBehavior File="Misc\RunLua" Lua="CastSpellByID(1850);" />
		</CustomBehavior>
	</If>
	<If Condition="Me.Class == WoWClass.Rogue" >
		<CustomBehavior File="Hooks\DoWhen" ActivityName="MoveDefHook" AllowUseDuringCombat="True" UseWhen="(Me.Combat &amp;&amp; Me.IsMoving &amp;&amp; Me.IsInInstance &amp;&amp; Me.IsAlive) &amp;&amp; ((!WoWSpell.FromId(2983).Cooldown) || (Me.HealthPercent &lt;= 20 &amp;&amp; !WoWSpell.FromId(5277).Cooldown))" >
			<CustomBehavior File="RunCode" Code="Bots.Professionbuddy.PBLog.Log(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: &quot;, System.Windows.Media.Colors.Orange, &quot;Attempting use of passive defensive maneuvers.&quot;);" />
			<If Condition="Me.HealthPercent &lt;= 20" >
				<CustomBehavior File="Misc\RunLua" Lua="CastSpellByID(5277);" />
			</If>
			<CustomBehavior File="Misc\RunLua" Lua="CastSpellByID(2983);" />
		</CustomBehavior>
	</If>
	<If Condition="Me.Class == WoWClass.Monk" >
		<CustomBehavior File="Hooks\DoWhen" ActivityName="MoveDefHook" AllowUseDuringCombat="True" UseWhen="(Me.Combat &amp;&amp; Me.IsMoving &amp;&amp; Me.IsInInstance &amp;&amp; Me.IsAlive) &amp;&amp; (Me.HealthPercent &lt;= 70 &amp;&amp; !WoWSpell.FromId(115072).Cooldown)" >
			<CustomBehavior File="RunCode" Code="Bots.Professionbuddy.PBLog.Log(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: &quot;, System.Windows.Media.Colors.Orange, &quot;Attempting use of passive defensive maneuvers.&quot;);" />
			<CustomBehavior File="Misc\RunLua" Lua="CastSpellByID(115072);" />
		</CustomBehavior>
	</If>
	<If Condition="Me.Class == WoWClass.Hunter" >
		<CustomBehavior File="Hooks\DoWhen" ActivityName="MoveDefHook" AllowUseDuringCombat="True" UseWhen="(Me.Combat &amp;&amp; Me.IsMoving &amp;&amp; Me.IsInInstance &amp;&amp; Me.IsAlive) &amp;&amp; ((!WoWSpell.FromId(13809).Cooldown) || (Me.HealthPercent &lt;= 30 &amp;&amp; !WoWSpell.FromId(19263).Cooldown))" >
			<CustomBehavior File="RunCode" Code="Bots.Professionbuddy.PBLog.Log(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: &quot;, System.Windows.Media.Colors.Orange, &quot;Attempting use of passive defensive maneuvers.&quot;);" />
			<If Condition="Me.HealthPercent &lt;= 30" >
				<CustomBehavior File="Misc\RunLua" Lua="CastSpellByID(19263);" />
			</If>
			<If Condition="Me.HasAura(77769)" >
				<CustomBehavior File="Misc\RunLua" Lua="CancelUnitBuff(&quot;player&quot;,&quot;Trap Launcher&quot;);" />
			</If>
			<CustomBehavior File="Misc\RunLua" Lua="CastSpellByID(13809);" />
		</CustomBehavior>
	</If>
	<If Condition="Me.Class == WoWClass.Shaman" >
		<CustomBehavior File="Hooks\DoWhen" ActivityName="MoveDefHook" AllowUseDuringCombat="True" UseWhen="(Me.Combat &amp;&amp; Me.IsMoving &amp;&amp; Me.IsInInstance &amp;&amp; Me.IsAlive) &amp;&amp; (!Me.HasAura(2645))" >
			<CustomBehavior File="RunCode" Code="Bots.Professionbuddy.PBLog.Log(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: &quot;, System.Windows.Media.Colors.Orange, &quot;Attempting use of passive defensive maneuvers.&quot;);" />
			<CustomBehavior File="Misc\RunLua" Lua="CastSpellByID(2645);" />
		</CustomBehavior>
	</If>
	<!-- <If Condition="Me.Class == WoWClass.DeathKnight" >
	</If> Hmm.... -->
	<!-- <If Condition="Me.Class == WoWClass.Warrior" >
	</If>  Perhaps use of Enraged healing. -->
	<If Condition="Me.Class == WoWClass.Paladin" >
		<CustomBehavior File="Hooks\DoWhen" ActivityName="MoveDefHook" AllowUseDuringCombat="True" UseWhen="(Me.Combat &amp;&amp; Me.IsMoving &amp;&amp; Me.IsInInstance &amp;&amp; Me.IsAlive) &amp;&amp; ((!WoWSpell.FromId(20271).Cooldown &amp;&amp; Me.KnowsSpell(87172)) || (Me.HealthPercent &lt;= 10 &amp;&amp; !WoWSpell.FromId(633).Cooldown))" >
			<CustomBehavior File="RunCode" Code="Bots.Professionbuddy.PBLog.Log(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: &quot;, System.Windows.Media.Colors.Orange, &quot;Attempting use of passive defensive maneuvers.&quot;);" />
			<If Condition="Me.HealthPercent &lt;= 10" >
				<CustomBehavior File="Misc\RunLua" Lua="CastSpellByID(633);" />
			</If>
			<If Condition="!WoWSpell.FromId(20271).Cooldown &amp;&amp; Me.KnowsSpell(87172)" >
				<CustomBehavior File="Misc\RunLua" Lua="TargetNearestEnemy(); CastSpellByID(20271);" />
			</If>
		</CustomBehavior>
	</If>
<!-- END Declare movement buff hooks -->

<While Condition="true" >

		<If Condition="!(Me.MapId == 600) &amp;&amp; (Me.FreeBagSlots &gt;= 17)" >
			<If Condition="Me.Location.Distance(new WoWPoint(4893.181, -2042.959, 248.309 )) &lt; 17" > <!-- If we just used Traveler's Mammoth -->
				<CustomBehavior File="MyCTM" X="4872.786" Y="-2032.948" Z="250.0702" />
				<CustomBehavior File="MyCTM" X="4824.002" Y="-2037.679" Z="250.1376" />
				<CustomBehavior File="MyCTM" X="4772.893" Y="-2036.125" Z="229.3822" />
			</If>
			<If Condition="Me.Location.Distance(new WoWPoint(4775.771, -2045.906, 229.4198)) &gt;= 150" >
				<CustomBehavior File="RunCode" Code="Bots.Professionbuddy.PBLog.Log(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: &quot;, System.Windows.Media.Colors.LightGreen, &quot;Heading to Instance.&quot;);" />
				<CustomBehavior File="FlyTo" X="4922.837" Y="-2046.354" Z="279.7324" />
				<CustomBehavior File="MyCTM"  X="4868.813" Y="-2034.23" Z="250.0712" />
				<CustomBehavior File="MyCTM" X="4815.126" Y="-2040.735" Z="245.4605" />
				<MoveTo X="4775.389" Y="-2034.485" Z="229.3875" />
			</If>
			<Else>
				<CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: Profile started with full bags.&quot;);" />
			</Else>
		</If>
		<While Condition="(Me.FreeBagSlots &gt;= 17)" >
			<CustomBehavior File="RunMacro" Macro="/script ResetInstances()" />
			<If Condition="!(Me.MapId == 600)" >
				<RunTo X="4774.621" Y="-2029.685" Z="229.3802" />
				<CustomBehavior File="MyCTM" X="4774.691" Y="-2015.088" Z="229.3516" TerminateWhen="Me.MapId == 600" />
			</If>
			<If Condition="(Me.MapId == 600)" >
				<DisableBehavior Name="Combat" /> <!-- Avoid spiders on second level -->

				<CustomBehavior File="RunMacro" Macro="/sw clear" />
				<CustomBehavior File="Misc\RunLua" Lua="print(&quot;|cFF3399FF[Azyul]|r: In-game timer started.&quot;)" />
				<CustomBehavior File="RunMacro" Macro="/sw play" />
				<CustomBehavior File="Misc\RunLua" Lua="ShowLoadMessage = GetMoney();" />
				<CustomBehavior File="Misc\RunLua" Lua="WarningIconRight = GetTime();" />
				<CustomBehavior File="Misc\RunLua" Lua="ShowEngageMessage = GetMoney();" />

 				<CustomBehavior File="Misc\InstanceTimer" Timer="Start" />
				<CustomBehavior File="Hooks\DoWhen" ActivityName="CustomDeathHook" Command="Enable" />
			    <RunTo X="-515.2283" Y="-500.0652" Z="11.0231"  />
			    <RunTo X="-508.0701" Y="-514.1385" Z="11.0453"  />
			    <RunTo X="-537.1221" Y="-551.0976" Z="2.2656"  />


			    <DisableBehavior Name="Combat" />
				    <RunTo X="-537.1692" Y="-578.1137" Z="1.9140"  />
				    <RunTo X="-544.5040" Y="-579.6451" Z="1.0251"  />
				    <RunTo X="-517.4600" Y="-599.9984" Z="1.0250"  />
				    <RunTo X="-483.5866" Y="-606.0858" Z="1.4814"  />
				    <RunTo X="-469.5986" Y="-599.4240" Z="1.6413"  />
				    <RunTo X="-413.5121" Y="-603.0125" Z="1.0249"  />
				    <RunTo X="-384.3532" Y="-602.3880" Z="1.0249"  />
				    <RunTo X="-363.6618" Y="-608.0938" Z="2.2632"  />
					<RunTo X="-322.1031" Y="-647.5912" Z="10.9239"  />
					<RunTo X="-325.0045" Y="-658.7132" Z="10.3809"  />
				    <RunTo X="-324.2822" Y="-671.5656" Z="10.9238"  />
				    <RunTo X="-300.2212" Y="-667.8179" Z="10.9238"  />
				    <RunTo X="-278.3122" Y="-658.3167" Z="18.9390"  />
				    <RunTo X="-268.0731" Y="-659.5375" Z="26.5084"  />
				<EnableBehavior Name="Combat" />
				<EnableBehavior Name="Combat" />

			    <MoveTo X="-260.1227" Y="-679.8981" Z="26.52317" />


			    <DisableBehavior Name="Combat" />
			    	<RunTo X="-257.2279" Y="-712.0146" Z="27.1521" />
					<RunTo X="-245.5512" Y="-723.813" Z="27.37361" />
					<RunTo X="-289.179" Y="-728.0784" Z="27.29649" />
					<RunTo X="-279.2386" Y="-711.1038" Z="27.29188" />
			    <EnableBehavior Name="Combat" />
			    
			    <RunTo X="-292.9587" Y="-716.4481" Z="27.53353" />
			    <MoveTo X="-338.6151" Y="-720.4265" Z="28.57711" />
			    <CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: This boss isn't worth it.&quot;);" />
			    <CustomBehavior File="MyCTM" X="-393.7734" Y="-721.4113" Z="28.59065" />
			    <CustomBehavior File="MyCTM" X="-409.0117" Y="-729.8685" Z="28.58064" />

			    <MoveTo X="-424.5214" Y="-695.5582" Z="28.57602" />


			    <DisableBehavior Name="Combat" />
					<RunTo X="-402.5685" Y="-670.2057" Z="26.64206" />
					<RunTo X="-454.369" Y="-652.0738" Z="28.42467" />
					<RunTo X="-501.23" Y="-651.8302" Z="30.22856" />
					<RunTo X="-497.2484" Y="-718.712" Z="30.24763" />
					<RunTo X="-512.645" Y="-725.9342" Z="30.24763" />
					<RunTo X="-533.1378" Y="-714.5676" Z="30.24775" />
					<RunTo X="-544.3643" Y="-704.096" Z="30.2448" />
					<RunTo X="-554.3542" Y="-689.1397" Z="30.70627" />
					<RunTo X="-543.3079" Y="-670.9773" Z="30.34695" />
					<RunTo X="-531.3521" Y="-660.9335" Z="30.28404" />
					<RunTo X="-530.1593" Y="-697.5297" Z="30.24668" />
			    <EnableBehavior Name="Combat" />

				<CustomBehavior File="WaitTimer" WaitTime="750" />
				<CustomBehavior File="Misc\RunLua" Lua="if not IsMounted() then local m,t,f=&quot;mount&quot;,{{},{}} for i=2,GetNumCompanions(m) do tinsert(t[bit.band(2,select(6,GetCompanionInfo(m,i)))==0 and 1 or 2],i) end f=IsFlyableArea() and 2 or 1 CallCompanion(m,t[f][random(#t[f])]) else Dismount() end" />
				<CustomBehavior File="WaitTimer" WaitTime="1500" />

			    <MoveTo X="-508.7027" Y="-727.5312" Z="30.24722" />
			    <MoveTo X="-487.2624" Y="-709.7524" Z="30.24722" />
			    <MoveTo X="-472.4294" Y="-631.804" Z="72.60222" />
		
			    <DisableBehavior Name="Combat" />
					<RunTo X="-447.0287" Y="-603.547" Z="72.60651" />
					<RunTo X="-416.5739" Y="-595.7975" Z="72.60668" />
					<RunTo X="-405.4579" Y="-608.7828" Z="72.60668" />
					<RunTo X="-345.2475" Y="-611.0251" Z="72.60713" />
					<RunTo X="-342.2566" Y="-592.2085" Z="72.60779" />
					<RunTo X="-305.9066" Y="-612.2153" Z="72.59185" />
					<RunTo X="-288.0025" Y="-699.2864" Z="101.7704" />
					<RunTo X="-274.4177" Y="-728.6484" Z="101.7957" />
					<RunTo X="-268.0679" Y="-726.1499" Z="102.7696" />
			    <EnableBehavior Name="Combat" />

			    <MoveTo X="-245.4132" Y="-730.9987" Z="116.4721" />
			    <MoveTo X="-237.274" Y="-698.6867" Z="131.1712" />

			    <MoveTo X="-236.8188" Y="-676.8137" Z="131.8641" />
			    <MoveTo X="-244.5186" Y="-620.9827" Z="116.4726" />

			    <CustomBehavior File="MyCTM" X="-266.3696" Y="-618.3034" Z="88.80046" />
			    <CustomBehavior File="MyCTM" X="-254.1121" Y="-620.0305" Z="90.78832" />
			    <CustomBehavior File="MyCTM" X="-240.4345" Y="-624.7491" Z="90.783" />
			    <CustomBehavior File="MyCTM" X="-240.6464" Y="-643.9133" Z="62.07785" />
			    <CustomBehavior File="MyCTM" X="-239.9168" Y="-621.88" Z="64.68836" />
			    <CustomBehavior File="MyCTM" X="-238.0628" Y="-592.0763" Z="11.15806" />
			    <CustomBehavior File="MyCTM" X="-238.3158" Y="-577.2864" Z="11.04181" />

			    <MoveTo X="-317.2586" Y="-577.3348" Z="11.00636" />
			    <MoveTo X="-372.7647" Y="-595.0178" Z="2.462813" />
			    <MoveTo X="-460.0569" Y="-600.3992" Z="1.956773" />

			    <MoveTo X="-529.5821" Y="-588.1884" Z="2.457371" />
			    <MoveTo X="-531.9599" Y="-539.5211" Z="3.328138" />
			    <MoveTo X="-507.212" Y="-511.9265" Z="11.04625" />
			    <MoveTo X="-516.8404" Y="-487.5807" Z="11.00653" />

				<CustomBehavior File="Misc\RunLua" Lua="print(&quot;|cFF3399FF[Azyul]|r: Instance completed, in-game timer paused.&quot;)" />
				<CustomBehavior File="RunMacro" Macro="/sw pause" />
				<CustomBehavior File="Hooks\DoWhen" ActivityName="CustomDeathHook" Command="Disable" />

				<CustomBehavior File="Misc\RunLua" Lua="ShowPizzaMessage = GetMoney();" />
				<CustomBehavior File="Misc\RunLua" Lua="ShowWipeMessage = math.floor(ShowPizzaMessage-ShowLoadMessage);" />
				<CustomBehavior File="Misc\RunLua" Lua="totalmoney = math.floor(ShowPizzaMessage-ShowKillMessage);" />
				<CustomBehavior File="Misc\RunLua" Lua="print(&quot;|cFF3399FF[Azyul]|r: Quick Stats!\nPicked up: &quot;, GetCoinTextureString(ShowWipeMessage), &quot;\nTotals:  &quot;, GetCoinTextureString(totalmoney))" />

				<CustomBehavior File="Misc\RunLua" Lua="ShowPizzaMessage = GetMoney();" />
				<CustomBehavior File="Misc\RunLua" Lua="WarningIconChat = GetTime();" />
				<CustomBehavior File="Misc\RunLua" Lua="WarningIconLeft = math.floor(WarningIconChat-WarningIconRight)" /> 
					
				<If Condition="(Me.FreeBagSlots &lt; 17)" >
					<CustomBehavior File="RunCode" Code="Bots.Professionbuddy.PBLog.Log(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: &quot;, System.Windows.Media.Colors.LightGreen, &quot;Skipping wait since we're going to the vendor.&quot;);" />
					<Else>
						<CustomBehavior File="Misc\InstanceTimer" Timer="Check" WaitTime="369000" />
					</Else>
				</If>
				<CustomBehavior File="MyCTM" X="-525.4516" Y="-474.7986" Z="10.98291" TerminateWhen="Me.MapId != 600" />
			    <CustomBehavior File="RunMacro" Macro="/script ResetInstances()" />
			</If>
		</While>
			<!-- Force Town Sell -->
			<If Condition="(Me.FreeBagSlots &lt; 17)" >
				<CustomBehavior File="Misc\RunLua" Lua="ShowRecoveryMessage = GetMoney();" />
				<CustomBehavior File="RunCode" Code="Bots.Professionbuddy.PBLog.Log(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: &quot;, System.Windows.Media.Colors.LightGreen, &quot;Moving to Sell, Repair and Mail.&quot;);" />
				<If Condition="Me.Location.Distance(new WoWPoint(4775.771, -2045.906, 229.4198)) &lt;= 150" > <!-- If just came out instance -->
					<MoveTo X="4781.665" Y="-2042.948" Z="229.428" />
					<MoveTo X="4844.876" Y="-2034.98" Z="250.072" />
					<MoveTo X="4884.797" Y="-2036.033" Z="250.0502" />
					<CustomBehavior File="MyCTM" X="4895.741" Y="-2039.486" Z="248.3093" />
				</If>

				<If Condition="Me.KnowsSpell(61425) || Me.KnowsSpell(61447) || Me.KnowsSpell(122708)" >
					<CustomBehavior File="WaitTimer" WaitTime="750" />
					<CustomBehavior File="RunMacro" Macro="/cast Тундровый мамонт путешественника\n/cast Traveler's Tundra Mammoth\n/cast Tundramammut des Reisenden\n/cast Großes Expeditionsyak\n/cast Большой як для путешествий\n/cast Grand Expedition Yak" />
					<CustomBehavior File="WaitTimer" WaitTime="2000" />
					<CustomBehavior File="ForceSetVendor" DoSell="true" DoRepair="true" />
					<RunTo X="4889.332" Y="-2032.711" Z="248.3089" />
				</If>

				<If Condition="(Me.FreeBagSlots &lt; 17)" >
					<CustomBehavior File="FlyTo" X="5077.122" Y="-2249.123" Z="430.6839" />
				<CustomBehavior File="FlyTo" X="5384.368" Y="-2631.522" Z="329.4101" />
				<CustomBehavior File="FlyTo" X="5405.227" Y="-2655.048" Z="303.9551" />
				<CustomBehavior File="RunMacro" Macro="/dismount" />
				<SetVendor>
					<Vendors>
						<Vendor Name="Arlen Brighthammer" Entry="28796" Type="Repair" X="5410.7" Y="-2658.249" Z="303.9539" />
					</Vendors>
				</SetVendor>
				<CustomBehavior File="ForceSetVendor" DoMail="False" DoSell="True" DoRepair="True" />
				<CustomBehavior File="WaitTimer" WaitTime="1000" />
				<ClearVendor />
				<RunTo X="5397.145" Y="-2639.515" Z="303.9551" />
				<RunTo X="5416.015" Y="-2622.577" Z="306.9517" />
				<SetMailbox>
					<Mailboxes>
						<Mailbox X="5417.155" Y="-2620.26" Z="307.0088" />
					</Mailboxes>
				</SetMailbox>
				<CustomBehavior File="ForceSetVendor" DoMail="True" DoSell="False" DoRepair="False" />
				<RunTo X="5396.842" Y="-2617.582" Z="303.9539" />
				<ClearMailbox />
				<CustomBehavior File="FlyTo" X="5377.773" Y="-2611.433" Z="321.3243" />

				<CustomBehavior File="Misc\RunLua" Lua="AutoRespond = GetMoney();" />
				<CustomBehavior File="Misc\RunLua" Lua="WhisperStats = math.floor(AutoRespond-ShowRecoveryMessage);" />
				<CustomBehavior File="Misc\RunLua" Lua="vendortotalmoney = math.floor(AutoRespond-ShowKillMessage);" />
				<CustomBehavior File="Misc\RunLua" Lua="print(&quot;|cFF3399FF[Azyul]|r: Quick Stats!\nPicked up: &quot;, GetCoinTextureString(ShowWipeMessage), &quot;\nTotals:  &quot;, GetCoinTextureString(totalmoney))" />
			</If>
		</If>

</While>


</QuestOrder>
</HBProfile>